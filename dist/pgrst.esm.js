var h=class{constructor({pgrst_url:e="localhost:3000",schema:s="public",jwt:i=""}={}){this.pgrst_url=e,this.schema=s,this.jwt=i}async query(e="",s=null,i="INSERT"){let a=null;if(s){let t={"Content-Type":"application/json","Content-Profile":this.schema,Accept:"application/vnd.pgrst.object+json",Prefer:"resolution=merge-duplicates, return=representation"};this.jwt&&(t.Authorization="Bearer "+this.jwt);let r={method:"POST",headers:t,body:JSON.stringify(s)};if(i)switch(i.toUpperCase()){case"DELETE":r.method="DELETE";break;case"UPDATE":r.method="PATCH";break}a=await fetch(this.pgrst_url+"/"+e,{...r})}else{let t={"Accept-Profile":this.schema};this.jwt&&(t.Authorization="Bearer "+this.jwt),a=await fetch(this.pgrst_url+"/"+e,{headers:t})}return await a.json()}};export{h as default};
